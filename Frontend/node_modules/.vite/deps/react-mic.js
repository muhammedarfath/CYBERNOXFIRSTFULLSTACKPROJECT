import {
  require_prop_types
} from "./chunk-B6EY22UA.js";
import {
  require_react
} from "./chunk-OU5AQDZK.js";
import {
  __commonJS
} from "./chunk-EWTE5DHJ.js";

// node_modules/react-mic/dist/index.js
var require_dist = __commonJS({
  "node_modules/react-mic/dist/index.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "object" == typeof module ? module.exports = t(require_prop_types(), require_react()) : "function" == typeof define && define.amd ? define([,], t) : "object" == typeof exports ? exports.ReactMic = t(require_prop_types(), require_react()) : e.ReactMic = t(e.PropTypes, e.React);
    }(window, function(e, t) {
      return function(e2) {
        var t2 = {};
        function n(r) {
          if (t2[r]) return t2[r].exports;
          var o = t2[r] = { i: r, l: false, exports: {} };
          return e2[r].call(o.exports, o, o.exports, n), o.l = true, o.exports;
        }
        return n.m = e2, n.c = t2, n.d = function(e3, t3, r) {
          n.o(e3, t3) || Object.defineProperty(e3, t3, { enumerable: true, get: r });
        }, n.r = function(e3) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e3, "__esModule", { value: true });
        }, n.t = function(e3, t3) {
          if (1 & t3 && (e3 = n(e3)), 8 & t3) return e3;
          if (4 & t3 && "object" == typeof e3 && e3 && e3.__esModule) return e3;
          var r = /* @__PURE__ */ Object.create(null);
          if (n.r(r), Object.defineProperty(r, "default", { enumerable: true, value: e3 }), 2 & t3 && "string" != typeof e3) for (var o in e3) n.d(r, o, (function(t4) {
            return e3[t4];
          }).bind(null, o));
          return r;
        }, n.n = function(e3) {
          var t3 = e3 && e3.__esModule ? function() {
            return e3.default;
          } : function() {
            return e3;
          };
          return n.d(t3, "a", t3), t3;
        }, n.o = function(e3, t3) {
          return Object.prototype.hasOwnProperty.call(e3, t3);
        }, n.p = "", n(n.s = 2);
      }([function(t2, n) {
        t2.exports = e;
      }, function(e2, n) {
        e2.exports = t;
      }, function(e2, t2, n) {
        e2.exports = n(3);
      }, function(e2, t2, n) {
        "use strict";
        n.r(t2);
        var r, o, i, a = n(1), c = n.n(a), u = n(0), s = new (window.AudioContext || window.webkitAudioContext)(), l = s.createAnalyser(), f = { getAudioContext: function() {
          return s;
        }, getAnalyser: function() {
          return l;
        }, resetAnalyser: function() {
          l = s.createAnalyser();
        }, decodeAudioData: function() {
          s.decodeAudioData(audioData).then(function(e3) {
          });
        } };
        function p(e3, t3) {
          for (var n2 = 0; n2 < t3.length; n2++) {
            var r2 = t3[n2];
            r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e3, r2.key, r2);
          }
        }
        var d, v, y, h, b, g, m, S, w = [];
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
        var C, R = function() {
          function e3(t4, n3, a3, c2, u2, s2) {
            var l2, p2, C2, R2 = this;
            !function(e4, t5) {
              if (!(e4 instanceof t5)) throw new TypeError("Cannot call a class as a function");
            }(this, e3), C2 = function() {
              if (d = Date.now(), i) {
                if (o && "suspended" === o.state && o.resume(), i && "paused" === i.state) return void i.resume();
                o && i && "inactive" === i.state && (i.start(10), o.createMediaStreamSource(v).connect(r), h && h());
              } else navigator.mediaDevices ? (console.log("getUserMedia supported."), navigator.mediaDevices.getUserMedia(S).then(function(e4) {
                v = e4, i = MediaRecorder.isTypeSupported(y.mimeType) ? new MediaRecorder(e4, y) : new MediaRecorder(e4), h && h(), i.onstop = R2.onStop, i.ondataavailable = function(e5) {
                  w.push(e5.data), m && m(e5.data);
                }, (o = f.getAudioContext()).resume().then(function() {
                  r = f.getAnalyser(), i.start(10), o.createMediaStreamSource(v).connect(r);
                });
              })) : alert("Your browser does not support audio recording");
            }, (p2 = "startRecording") in (l2 = this) ? Object.defineProperty(l2, p2, { value: C2, enumerable: true, configurable: true, writable: true }) : l2[p2] = C2;
            var A2 = s2.echoCancellation, x2 = s2.autoGainControl, M2 = s2.noiseSuppression, P2 = s2.channelCount;
            h = t4, b = n3, g = a3, m = c2, y = u2, S = { audio: { echoCancellation: A2, autoGainControl: x2, noiseSuppression: M2, channelCount: P2 }, video: false };
          }
          var t3, n2, a2;
          return t3 = e3, (n2 = [{ key: "stopRecording", value: function() {
            i && "inactive" !== i.state && (i.stop(), v.getAudioTracks().forEach(function(e4) {
              e4.stop();
            }), i = null, f.resetAnalyser());
          } }, { key: "onStop", value: function() {
            var e4 = new Blob(w, { type: y.mimeType });
            w = [];
            var t4 = { blob: e4, startTime: d, stopTime: Date.now(), options: y, blobURL: window.URL.createObjectURL(e4) };
            b && b(t4), g && g(t4);
          } }]) && p(t3.prototype, n2), a2 && p(t3, a2), e3;
        }(), A = { create: function(e3) {
          var t3 = f.getAudioContext(), n2 = f.getAnalyser();
          if (void 0 === C) {
            var r2 = t3.createMediaElementSource(e3);
            r2.connect(n2), C = r2;
          }
          n2.connect(t3.destination);
        } }, x = { visualizeSineWave: function(e3, t3, n2, r2, o2, i2) {
          var a2 = f.getAnalyser(), c2 = a2.fftSize, u2 = new Uint8Array(c2);
          e3.clearRect(0, 0, n2, r2), function s2() {
            requestAnimationFrame(s2), (a2 = f.getAnalyser()).getByteTimeDomainData(u2), e3.fillStyle = o2, e3.fillRect(0, 0, n2, r2), e3.lineWidth = 2, e3.strokeStyle = i2, e3.beginPath();
            for (var l2 = 1 * n2 / c2, p2 = 0, d2 = 0; d2 < c2; d2++) {
              var v2 = u2[d2] / 128 * r2 / 2;
              0 === d2 ? e3.moveTo(p2, v2) : e3.lineTo(p2, v2), p2 += l2;
            }
            e3.lineTo(t3.width, t3.height / 2), e3.stroke();
          }();
        }, visualizeFrequencyBars: function(e3, t3, n2, r2, o2, i2) {
          var a2 = this, c2 = f.getAnalyser();
          c2.fftSize = 256;
          var u2 = c2.frequencyBinCount, s2 = new Uint8Array(u2);
          e3.clearRect(0, 0, n2, r2), function t4() {
            requestAnimationFrame(t4), (c2 = f.getAnalyser()).getByteFrequencyData(s2), e3.fillStyle = o2, e3.fillRect(0, 0, n2, r2);
            for (var l2, p2 = n2 / u2 * 2.5, d2 = 0, v2 = 0; v2 < u2; v2++) {
              l2 = s2[v2];
              a2.hexToRgb(i2);
              e3.fillStyle = i2, e3.fillRect(d2, r2 - l2 / 2, p2, l2 / 2), d2 += p2 + 1;
            }
          }();
        }, visualizeFrequencyCircles: function(e3, t3, n2, r2, o2, i2) {
          var a2 = f.getAnalyser();
          a2.fftSize = 32;
          var c2 = a2.frequencyBinCount, u2 = new Uint8Array(c2);
          e3.clearRect(0, 0, n2, r2), function t4() {
            requestAnimationFrame(t4), (a2 = f.getAnalyser()).getByteFrequencyData(u2);
            for (var s2 = new Uint8Array(c2 / 3), l2 = 0; l2 < c2; l2 += 3) {
              for (var p2 = 0, d2 = 0; d2 < 3; d2++) p2 += u2[l2 + d2];
              s2[l2 / 3] = p2 / 3;
            }
            e3.clearRect(0, 0, n2, r2), e3.beginPath(), e3.arc(n2 / 2, r2 / 2, Math.min(r2, n2) / 2, 0, 2 * Math.PI), e3.fillStyle = o2, e3.fill();
            var v2 = Math.min(r2, n2) / 2 / s2.length;
            e3.strokeStyle = i2;
            for (var y2 = 0; y2 < s2.length; y2++) {
              e3.beginPath();
              var h2 = v2 * y2 + v2 * (s2[y2] / 128);
              e3.arc(n2 / 2, r2 / 2, h2, 0, 2 * Math.PI), e3.stroke();
            }
          }();
        }, hexToRgb: function(e3) {
          var t3 = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e3);
          return t3 ? { r: parseInt(t3[1], 16), g: parseInt(t3[2], 16), b: parseInt(t3[3], 16) } : null;
        } };
        function M(e3) {
          return (M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e4) {
            return typeof e4;
          } : function(e4) {
            return e4 && "function" == typeof Symbol && e4.constructor === Symbol && e4 !== Symbol.prototype ? "symbol" : typeof e4;
          })(e3);
        }
        function P(e3, t3) {
          for (var n2 = 0; n2 < t3.length; n2++) {
            var r2 = t3[n2];
            r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e3, r2.key, r2);
          }
        }
        function T(e3) {
          return (T = Object.setPrototypeOf ? Object.getPrototypeOf : function(e4) {
            return e4.__proto__ || Object.getPrototypeOf(e4);
          })(e3);
        }
        function j(e3) {
          if (void 0 === e3) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return e3;
        }
        function k(e3, t3) {
          return (k = Object.setPrototypeOf || function(e4, t4) {
            return e4.__proto__ = t4, e4;
          })(e3, t3);
        }
        var O = function(e3) {
          function t3(e4) {
            var n3, r3, o3, i2, a2, u2;
            return function(e5, t4) {
              if (!(e5 instanceof t4)) throw new TypeError("Cannot call a class as a function");
            }(this, t3), r3 = this, o3 = T(t3).call(this, e4), n3 = !o3 || "object" !== M(o3) && "function" != typeof o3 ? j(r3) : o3, i2 = j(n3), u2 = function() {
              var e5 = n3.props, t4 = e5.backgroundColor, r4 = e5.strokeColor, o4 = e5.width, i3 = e5.height, a3 = e5.visualSetting, c2 = n3.state, u3 = c2.canvas, s2 = c2.canvasCtx;
              "sinewave" === a3 ? x.visualizeSineWave(s2, u3, o4, i3, t4, r4) : "frequencyBars" === a3 ? x.visualizeFrequencyBars(s2, u3, o4, i3, t4, r4) : "frequencyCircles" === a3 && x.visualizeFrequencyCircles(s2, u3, o4, i3, t4, r4);
            }, (a2 = "visualize") in i2 ? Object.defineProperty(i2, a2, { value: u2, enumerable: true, configurable: true, writable: true }) : i2[a2] = u2, n3.visualizerRef = c.a.createRef(), n3.state = { microphoneRecorder: null, canvas: null, canvasCtx: null }, n3;
          }
          var n2, r2, o2;
          return function(e4, t4) {
            if ("function" != typeof t4 && null !== t4) throw new TypeError("Super expression must either be null or a function");
            e4.prototype = Object.create(t4 && t4.prototype, { constructor: { value: e4, writable: true, configurable: true } }), t4 && k(e4, t4);
          }(t3, e3), n2 = t3, (r2 = [{ key: "componentDidUpdate", value: function(e4) {
            var t4 = this.props, n3 = t4.record, r3 = t4.onStop, o3 = this.state.microphoneRecorder;
            e4.record !== n3 && (n3 ? o3 && o3.startRecording() : o3 && (o3.stopRecording(r3), this.clear()));
          } }, { key: "componentDidMount", value: function() {
            var e4 = this, t4 = this.props, n3 = t4.onSave, r3 = t4.onStop, o3 = t4.onStart, i2 = t4.onData, a2 = t4.audioElem, c2 = t4.audioBitsPerSecond, u2 = t4.echoCancellation, s2 = t4.autoGainControl, l2 = t4.noiseSuppression, f2 = (t4.channelCount, t4.mimeType), p2 = this.visualizerRef.current, d2 = p2.getContext("2d"), v2 = { audioBitsPerSecond: c2, mimeType: f2 }, y2 = { echoCancellation: u2, autoGainControl: s2, noiseSuppression: l2 };
            a2 ? (A.create(a2), this.setState({ canvas: p2, canvasCtx: d2 }, function() {
              e4.visualize();
            })) : this.setState({ microphoneRecorder: new R(o3, r3, n3, i2, v2, y2), canvas: p2, canvasCtx: d2 }, function() {
              e4.visualize();
            });
          } }, { key: "clear", value: function() {
            var e4 = this.props, t4 = e4.width, n3 = e4.height;
            this.state.canvasCtx.clearRect(0, 0, t4, n3);
          } }, { key: "render", value: function() {
            var e4 = this.props, t4 = e4.width, n3 = e4.height;
            return c.a.createElement("canvas", { ref: this.visualizerRef, height: n3, width: t4, className: this.props.className });
          } }]) && P(n2.prototype, r2), o2 && P(n2, o2), t3;
        }(a.Component);
        O.propTypes = { backgroundColor: u.string, strokeColor: u.string, className: u.string, audioBitsPerSecond: u.number, mimeType: u.string, height: u.number, record: u.bool.isRequired, onStop: u.func, onData: u.func, onSave: u.func }, O.defaultProps = { backgroundColor: "rgba(255, 255, 255, 0.5)", strokeColor: "#000000", className: "visualizer", audioBitsPerSecond: 128e3, mimeType: "audio/webm;codecs=opus", record: false, width: 640, height: 100, visualSetting: "sinewave", echoCancellation: false, autoGainControl: false, noiseSuppression: false, channelCount: 2 }, n.d(t2, "ReactMic", function() {
          return O;
        });
      }]);
    });
  }
});
export default require_dist();
//# sourceMappingURL=react-mic.js.map
